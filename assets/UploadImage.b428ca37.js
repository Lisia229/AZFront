import{_ as h,s as p,t as k,J as v,o,c as n,B as i,C as g,e as f,b as _,z as N,w as u}from"./index.191f6e36.js";const U=["onDragenter","onDragleave","onDrop"],w=["for"],C=["src"],S={key:1,class:"image"},j=["id"],B={__name:"UploadImage",props:{className:{type:String,default:""},modelValue:{type:[String,Object],default:""},title:{type:String,default:""},error:{type:Boolean,default:!1},errorText:{type:String,default:""},id:{type:String}},setup(y,{emit:V}){const a=y,r=p(""),l=p(a.modelValue),s=p(a.errorText||""),x=k(()=>a.className==="avatar"?"avatar-img":"image"),d=e=>{s.value="";const t=e.dataTransfer.files[0];m(t)||(r.value=t,c())},D=e=>{s.value="";const t=e.target.files[0];m(t)||(r.value=t,c())},c=()=>{if(r.value&&r.value.type.startsWith("image/")){let e=new FileReader;e.addEventListener("load",t=>{l.value=t.target.result}),e.readAsDataURL(r.value)}},m=e=>!!e&&!(e.type==="image/jpg"||e.type==="image/jpeg"||e.type==="image/png")?(s.value="\u683C\u5F0F\u932F\u8AA4",!0):!!e&&Math.floor(e.size/1e6)>1?(s.value="\u6A94\u6848\u904E\u5927",!0):!1;return v(r,e=>{V("update:modelValue",e)}),v(a,e=>{e.modelValue!==l.value&&(l.value=e.modelValue),e.modelValue!==r.value&&(r.value=e.modelValue),e.modelValue===""&&(l.value="",c())}),(e,t)=>(o(),n("div",{onDragenter:u(d,["prevent"]),onDragleave:u(d,["prevent"]),onDragover:t[0]||(t[0]=u(()=>{},["prevent"])),onDrop:u(d,["prevent"]),onClick:t[1]||(t[1]=b=>s.value=""),class:i({"image-box":a.className!=="avatar"})},[l.value?f("",!0):(o(),n("p",{key:0,class:i({"image-title":a.className!=="avatar"})},g(a.title),3)),_("label",{for:a.id},[l.value?(o(),n("img",{key:0,src:l.value,class:i(N(x))},null,10,C)):(o(),n("div",S))],8,w),_("input",{type:"file",id:a.id,class:"drop-file-input",accept:"image/jpg, image/jpeg, image/png",onChange:D},null,40,j),a.error||s.value?(o(),n("p",{key:1,class:i(["text-red-400",{"text-center":a.className==="avatar"}])},g(a.title)+g(s.value),3)):f("",!0)],42,U))}},I=h(B,[["__scopeId","data-v-74f38f4d"]]);export{I as U};
